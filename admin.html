<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุงูุชุญูู - ูุชุฌุฑู</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script type="module" src="admin.js" defer></script>
</head>
<body>
    
    <header id="admin-header">
        <h1 class="store-name">ูุชุฌุฑู</h1>
        <div class="user-info-card">
            ูุฑุญุจุงู ุจู
            <p>ุฅุฏุงุฑุฉ ูุชุฌุฑู ุจูู ุณูููุฉ</p>
        </div>
        <button id="admin-logout-btn" class="icon-btn" title="ุชุณุฌูู ุงูุฎุฑูุฌ">
            <i class="fas fa-sign-out-alt"></i>
        </button>
    </header>

    <main id="admin-app-container">
        <section id="admin-login" class="contact">
            <h1>ุชุณุฌูู ุงูุฏุฎูู ูููุณุคูู</h1>
            <form id="login-form" class="contact-form">
                <p style="color:red; text-align:center;">ุชุญุฐูุฑ !! ูุฏ ูุชุณุจุจ ุงูุชุณุฌูู ุงูุฎุงุทุฃ ุงูู ุฏุฎูู ูุงูุฑูุณ ูุฌูุงุฒู</p>
                <label for="login-email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</label>
                <input type="email" id="login-email" name="email" required>

                <label for="login-password">ูููุฉ ุงููุฑูุฑ:</label>
                <input type="password" id="login-password" name="password" required>
                <button type="submit">ุชุณุฌูู ุงูุฏุฎูู</button>
            </form>
        </section>

        <div id="admin-dashboard" style="display:none; padding: 40px 20px;">
        
            <h2 class="section-title">ุงูุฃูุณุงู ุงูุฑุฆูุณูุฉ</h2>
            <p class="division-count">12 ูุณู</p>
            
            <div class="main-sections-grid">
                <div class="section-card" data-view="customers-view" data-color="pink">
                    <i class="fas fa-users"></i>
                    <span>ุงูุนููุงุก</span>
                </div>
                <div class="section-card" data-view="sales-view" data-color="purple">
                    <i class="fas fa-receipt"></i>
                    <span>ุงููุจูุนุงุช</span>
                </div>
                <div class="section-card" data-view="inventory-view" data-color="teal">
                    <i class="fas fa-boxes"></i>
                    <span>ุงููุฎุฒูู</span>
                </div>
                <div class="section-card indicator-card" data-view="inventory-alerts-view" data-color="yellow">
                    <span class="alert-count" id="inventory-alert-count">3</span>
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>ุชูุจููุงุช ุงููุฎุฒูู</span>
                </div>
                <div class="section-card" data-view="reports-view" data-color="lavender">
                    <i class="fas fa-chart-line"></i>
                    <span>ุงูุชูุงุฑูุฑ</span>
                </div>
                <div class="section-card" data-view="products-log-view" data-color="green">
                    <i class="fas fa-box-open"></i>
                    <span>ุณุฌู ุงูููุชุฌุงุช</span>
                </div>
                <div class="section-card" data-view="purchases-view" data-color="red">
                    <i class="fas fa-shopping-cart"></i>
                    <span>ุงููุดุชุฑูุงุช</span>
                </div>
                <div class="section-card" data-view="units-view" data-color="cyan">
                    <i class="fas fa-balance-scale"></i>
                    <span>ุงููุญุฏุงุช</span>
                </div>
                <div class="section-card" data-view="currencies-view" data-color="orange">
                    <i class="fas fa-dollar-sign"></i>
                    <span>ุงูุนููุงุช</span>
                </div>
                <div class="section-card" data-view="settings-view" data-color="gray">
                    <i class="fas fa-cog"></i>
                    <span>ุงูุฅุนุฏุงุฏุงุช</span>
                </div>
                <div class="section-card" data-view="departments-view" data-color="blue">
                    <i class="fas fa-table-list"></i>
                    <span>ุฅุฏุงุฑุฉ ุงูุฃูุณุงู</span>
                </div>
                <div class="section-card" data-view="suppliers-view" data-color="brown">
                    <i class="fas fa-truck"></i>
                    <span>ุงูููุฑุฏูู</span>
                </div>
            </div>
            
            <h2 class="section-title">ุฅุฏุงุฑุฉ ุงูุทูุจุงุช</h2>
            <div class="management-card" data-view="order-management-view">
                <i class="fas fa-clipboard-list"></i>
                <span>ุฅุฏุงุฑุฉ ุงูุทูุจุงุช</span>
            </div>
        </section>

        <section id="products-log-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">ุณุฌู ุงูููุชุฌุงุช</h2>
            
            <button id="add-product-btn" class="primary-btn"><i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</button>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ุงูุงุณู</th>
                        <th>ุงููุฆุฉ</th>
                        <th>ุณุนุฑ ุงูุดุฑุงุก</th>
                        <th>ุณุนุฑ ุงูุจูุน</th>
                        <th>ุงููููุฉ</th>
                        <th>ุงูููุฑุฏ</th>
                        <th>ุฅุฌุฑุงุกุงุช</th>
                    </tr>
                </thead>
                <tbody id="products-table-body">
                    </tbody>
            </table>
        </section>
        
        <section id="purchases-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">ุงููุดุชุฑูุงุช (ููุงุชูุฑ ุงูุดุฑุงุก)</h2>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ุฑูู ุงููุงุชูุฑุฉ</th>
                        <th>ุงูุชุงุฑูุฎ</th>
                        <th>ุงุณู ุงูููุชุฌ</th>
                        <th>ุงูุฅุฌูุงูู</th>
                        <th>ุญุงูุฉ ุงูุฏูุน</th>
                        <th>ุชุนุฏูู</th>
                    </tr>
                </thead>
                <tbody id="purchases-table-body">
                    </tbody>
            </table>
        </section>

        <section id="customers-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">๐ฅ ุงูุนููุงุก ุงููุณุฌููู</h2>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ุงูุงุณู</th>
                        <th>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</th>
                        <th>ุชุงุฑูุฎ ุงูุชุณุฌูู</th>
                        <th>ุฅุฌูุงูู ุงูุทูุจุงุช</th>
                    </tr>
                </thead>
                <tbody id="customers-table-body">
                    </tbody>
            </table>
        </section>
        
        <section id="sales-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">๐งพ ุงููุจูุนุงุช ูุงูุทูุจุงุช</h2>
            
            <div class="alerts-summary-card">
                <div class="summary-badge"><i class="fas fa-hand-holding-dollar"></i></div>
                <p>ุฅุฌูุงูู ุงููุจูุนุงุช: <span id="total-sales-value" class="financial-data">0.00 ุฑ.ุณ</span></p>
            </div>
            
            <button class="primary-btn" id="export-sales-pdf-btn"><i class="fas fa-file-pdf"></i> ุชุตุฏูุฑ ุงูููุงุชูุฑ PDF</button>

            <h3 class="section-subtitle">ููุงุชูุฑ ุงููุจูุนุงุช (ุงูุทูุจุงุช)</h3>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ุฑูู ุงูุทูุจ</th>
                        <th>ุงูุนููู</th>
                        <th>ุงูุชุงุฑูุฎ</th>
                        <th>ุงูุฅุฌูุงูู</th>
                        <th>ุงูุญุงูุฉ</th>
                        <th>ุฅุฌุฑุงุกุงุช</th>
                    </tr>
                </thead>
                <tbody id="admin-sales-table-body">
                    </tbody>
            </table>
        </section>
        
        <section id="inventory-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">๐งบ ุงููุฎุฒูู ุญุณุจ ุงููุฆุฉ</h2>
            
            <div id="category-cards-container" class="main-sections-grid">
                </div>
            
            <div id="category-products-list" class="data-card">
                <h3>ููุชุฌุงุช ุงููุฆุฉ ุงููุฎุชุงุฑุฉ: <span id="selected-category-name"></span></h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ุงูุงุณู</th>
                            <th>ุงููููุฉ</th>
                            <th>ุณุนุฑ ุงูุจูุน</th>
                            <th>ุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody id="inventory-products-table-body">
                        </tbody>
                </table>
            </div>
        </section>

        <section id="units-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">โ๏ธ ุฅุฏุงุฑุฉ ูุญุฏุงุช ุงูุจูุน</h2>
            
            <button id="add-unit-btn" class="primary-btn"><i class="fas fa-plus"></i> ุฅุถุงูุฉ ูุญุฏุฉ ุฌุฏูุฏุฉ</button>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ุงููุญุฏุฉ</th>
                        <th>ุงููุตู</th>
                        <th>ุฅุฌุฑุงุกุงุช</th>
                    </tr>
                </thead>
                <tbody id="units-table-body">
                    </tbody>
            </table>
        </section>

        <section id="currencies-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">๐ต ุฅุฏุงุฑุฉ ุงูุนููุงุช</h2>
            
            <button id="add-currency-btn" class="primary-btn"><i class="fas fa-plus"></i> ุฅุถุงูุฉ ุนููุฉ</button>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ุงูุนููุฉ</th>
                        <th>ุฑูุฒ ุงูุนููุฉ</th>
                        <th>ุณุนุฑ ุงูุตุฑู (ููุงุจู ุฑ.ุณ)</th>
                        <th>ุฅุฌุฑุงุกุงุช</th>
                    </tr>
                </thead>
                <tbody id="currencies-table-body">
                    </tbody>
            </table>
        </section>

        <section id="departments-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">๐ ุฅุฏุงุฑุฉ ุฃูุณุงู ุงูููุชุฌุงุช (ุงููุฆุงุช)</h2>
            
            <button id="add-category-btn" class="primary-btn"><i class="fas fa-plus"></i> ุฅุถุงูุฉ ูุฆุฉ ุฌุฏูุฏุฉ</button>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ุงุณู ุงููุฆุฉ</th>
                        <th>ูุตู ููุฌุฒ</th>
                        <th>ุฅุฌุฑุงุกุงุช</th>
                    </tr>
                </thead>
                <tbody id="categories-table-body">
                    </tbody>
            </table>
        </section>

        <section id="reports-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">ุงูุชูุงุฑูุฑ</h2>
            <div class="time-frame-selection">
                <button class="time-btn">ุดูุฑ</button>
                <button class="time-btn">ุฃุณุจูุน</button>
                <button class="time-btn active">ุงูููู</button>
            </div>
            
            <div class="data-card chart-card">
                <h3>ุฑุณู ุจูุงูู ูููุจูุนุงุช <span class="sub-text">(ุงููููุฉ ุจุงูุฑูุงู)</span></h3>
                <p class="sales-value">ุฑูุงู <span class="financial-data">8,323.00</span></p>
                <div class="chart-placeholder">
                                    </div>
            </div>
            
            <div class="data-card profit-card">
                <div class="profit-header">
                    <span class="change-indicator">+29.5%</span>
                    <span>ุฅุฌูุงูู ุงูุฃุฑุจุงุญ</span>
                </div>
                <p class="profit-value">ุฑูุงู <span id="total-profit-display" class="financial-data">2,457.00</span></p>
                <p class="profit-margin-text">ูุงูุด ุงูุฑุจุญ ูู ุฅุฌูุงูู ุงููุจูุนุงุช</p>
            </div>

            <h3 class="section-subtitle">ุฃูุซุฑ ุงูููุชุฌุงุช ูุจูุนุงู</h3>
            <div id="top-selling-products-list">
                </div>
        </section>
        
        <section id="inventory-alerts-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">โ๏ธ ุชูุจููุงุช ุงููุฎุฒูู</h2>
            <div id="alerts-summary" class="alerts-summary-card">
                <div class="summary-badge">3</div>
                <p>ููุชุฌุงุช ุชุญุชุงุฌ ุฅุนุงุฏุฉ ุทูุจ</p>
            </div>

            <div id="low-stock-list">
                </div>
        </section>
        
        <section id="settings-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</h2>
            <div class="settings-group">
                <h3>ุทุฑู ุงูุฏูุน</h3>
                <div id="payment-methods-settings">
                    </div>
            </div>
            
            <div class="settings-group">
                <h3>ุงูุดุญู ูุงูุชูุตูู</h3>
                <form id="shipping-settings-form">
                    <div class="input-group">
                        <label for="shipping-fee-input">ุฑุณูู ุงูุดุญู ุงูุซุงุจุชุฉ (ุฑ.ุณ):</label>
                        <input type="number" id="shipping-fee-input" value="15.00" min="0" step="0.01">
                    </div>
                    <button type="button" class="primary-btn" onclick="saveShippingSettings()">ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุดุญู</button>
                </form>
            </div>
        </section>

        <section id="suppliers-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">๐ ุงูููุฑุฏูู</h2>
            <button id="add-supplier-btn" class="primary-btn"><i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุฑุฏ</button>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>ุงูุงุณู</th>
                        <th>ุฑูู ุงููุงุชู</th>
                        <th>ุฅุฌุฑุงุกุงุช</th>
                    </tr>
                </thead>
                <tbody id="suppliers-table-body">
                    </tbody>
            </table>
        </section>
        
        <section id="order-management-view" class="admin-view hidden-view">
            <button class="back-btn" onclick="navigateToAdmin('admin-dashboard-view')"><i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ</button>
            <h2 class="section-title">๐ฆ ุฅุฏุงุฑุฉ ุงูุทูุจุงุช</h2>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ุฑูู ุงูุทูุจ</th>
                        <th>ุงูุนููู</th>
                        <th>ุงูุชุงุฑูุฎ</th>
                        <th>ุงูุฅุฌูุงูู</th>
                        <th>ุงูุญุงูุฉ</th>
                        <th>ุฅุฌุฑุงุกุงุช</th>
                    </tr>
                </thead>
                <tbody id="admin-orders-table-body">
                    </tbody>
            </table>
        </section>
    
    </main>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script> <script src="script.js"></script>
</body>
</html>